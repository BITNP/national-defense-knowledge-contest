for(var e=0,o=new Array(pcnt),t=$("#timer").val(),n=$.ajax({url:"test.txt",async:!1}).responseText.split("|"),s=0;s<pcnt;s++)o[s]=-1;function r(e){return(e<10?"0":"")+e.toString()}var c=!1,i=!1;function a(){if(!i){switch(t--,p(),$(".navbar_time").text(r(parseInt(t/60))+":"+r(t%60)),!0){case t<=120:$(".navbar_time").css("color","red"),c||(c=!0,layer.alert(n[0],{icon:7}));break;case t<=300:$(".navbar_time").css("color","orange");break;case t<=900:$(".navbar_time").css("color","blue")}0<t?setTimeout(function(){a()},1e3):(layer.msg(n[2],{time:1300}),b())}}function l(){for(var e="",t=0;t<pcnt;t++)e+=(0==t?"":"#")+o[t].toString();return e}function u(e,t){layer.open({title:"交卷错误",content:e+"<br/>errcode="+t.toString(),icon:2})}function b(){$.ajax({url:"control/judger.php",type:"POST",data:{answer:l()},cache:!1,success:function(e){try{obj=$.parseJSON(e)}catch(e){return void u("服务器出现错误，请稍后再尝试交卷!",2)}if(obj.success){var t=$("#score");t.html(obj.score),obj.score<60?t.css("color","red"):t.css("color","green"),layer.open({type:1,title:"提示",content:$("#result"),clostBtn:!1,icon:1,btn:["返回首页","查看试题"],yes:function(){window.location="index.php"},btn2:function(){window.location="review.php"}}),i=!0,$(window).unbind(),$this=$("#submit_button"),$this.prop("disabled",!0),$("#back_button").show()}else u(obj.err_message,3)},error:function(){u("服务器出现错误，请稍后再尝试交卷!",1)}})}$("#submit_button").click(function(){for(var e,t,n=!0,s=0;s<pcnt;s++)-1==o[s]&&(n=!1);n?(e="是否确认交卷？",t=3):(e="您仍有题目未作答，确认交卷？",t=7),layer.confirm(e,{icon:t,title:"交卷",yes:function(e){layer.close(e),b()}})});var f=$("#problems"),d=$("body");function p(){("none"!=d.css("-webkit-user-select")&&null!=d.css("-webkit-user-select")||"none"!=d.css("user-select")||"none"!=d.css("-moz-user-select")&&null!=d.css("-moz-user-select"))&&(d.css("-webkit-user-select","none"),d.css("user-select","none"),d.css("-moz-user-select","none"))}$(window).blur(function(){e++,layer.alert(n[1]+e.toString(),{icon:7})}),$(window).bind("beforeunload",function(){return 1}),f.find(".list-group").find("a").click(function(){$this=$(this);var e=f.find(".list-group").index($this.parent()),t=$this.parent().find("a").index($this);-1!=o[e]&&$this.parent().find("a").eq(o[e]).removeClass("active"),$this.addClass("active"),o[e]=t}),layer.msg("答题开始",{icon:1,time:1300}),a();